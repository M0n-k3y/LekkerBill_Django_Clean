{% extends "invoices/base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="text-center">
    <h1 class="h4">{{ title }}</h1>
    <p class="text-muted">You are being redirected to the secure PayFast payment gateway.</p>
    <div class="spinner-border text-primary mt-3" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Loading...</span>
    </div>

    <form action="{{ payfast_url }}" method="post" id="payfast-form" class="d-none">
        {% csrf_token %}
        {{ form.as_p }}
        <input type="submit" value="Click here if you are not redirected automatically." />
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => document.getElementById('payfast-form').submit());
</script>
{% endblock %}
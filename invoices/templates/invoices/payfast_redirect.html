{% extends "invoices/base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="text-center">
    <h1 class="h3 mb-3">{{ title }}</h1>
    <p class="lead">Please wait while we securely redirect you to the PayFast payment gateway.</p>
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
    <form action="{{ form.get_action }}" method="post" id="payfast-form" class="d-none">
        {{ form.as_p }}
    </form>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
<script>
    // Auto-submit the form as soon as the page loads
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('payfast-form').submit();
    });
</script>
{% endblock %}